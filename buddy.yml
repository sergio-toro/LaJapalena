- pipeline: "Deploy Theme - La Japaleña"
  trigger_mode: "ON_EVERY_PUSH"
  ref_name: "master"
  target_site_url: "https://xn--lajapalea-s6a.com/"
  actions:
  - action: "Deploy La Japaleña Theme"
    type: "SSH_COMMAND"
    working_directory: "/var/www/ghost-content/themes/LaJapalena"
    login: "root"
    host: "xn--lajapalea-s6a.com"
    port: "22"
    authentication_mode: "PUBLIC_KEY"
    commands:
    - "git pull origin master"
    - "chown ghost:ghost ./ -R"
    - "systemctl restart ghost"
    - "sleep 5"
    - "systemctl status ghost"
  - action: "Send Email notification"
    type: "EMAIL"
    trigger_time: "ON_FAILURE"
    title: "Failed ${execution.pipeline.name} execution #${execution.id}"
    content: "Deploy de Tema La Japaleña ha fallado"
    recipients: "sergio.toro.castano@gmail.com"
